# Contributing to BugChan

Thanks for contributing! This guide covers local setup, project structure, envs, deploys, and useful scripts.

## Monorepo layout
- packages/hardhat – Solidity contracts, deploy scripts, tests
- packages/nextjs – Next.js frontend (App Router)

## Prerequisites
- Node.js 20+
- Yarn 3 (Corepack)
- A wallet (e.g., MetaMask)

## Setup
```bash
git clone https://github.com/swarooppatilx/bug-chan.git
cd bug-chan
yarn install
```

## Environments

Frontend: `packages/nextjs/.env`
- NEXT_PUBLIC_LIGHTHOUSE_API_KEY
- NEXT_PUBLIC_WALLET_CONNECT_PROJECT_ID
- NEXT_PUBLIC_ALCHEMY_API_KEY

Backend: `packages/hardhat/.env`
- ALCHEMY_API_KEY
- ETHERSCAN_V2_API_KEY
- DEPLOYER_PRIVATE_KEY_ENCRYPTED (generated by scripts)

Generate/import keys:
```bash
yarn generate
yarn account
yarn account:import
```

## Local development
```bash
yarn chain        # start Hardhat
yarn deploy       # deploy to localhost and generate ABIs/addresses
yarn deploy --reset # if contarct code is changed
yarn start        # start Next.js http://localhost:3000
```

Run tests & lint:
```bash
yarn test
yarn lint
yarn format
```

## Deploy (testnet)
```bash
yarn deploy --network sepolia
# Commit the updated packages/nextjs/contracts/deployedContracts.ts
```

Host the frontend (Vercel):
- Root Directory: `packages/nextjs`
- Build Command: `yarn build`
- Install Command: `yarn install`
- Add NEXT_PUBLIC_* env vars in Vercel dashboard
- Add VERCEL_PROJECT_PRODUCTION_URL

## Troubleshooting
- Missing contracts on frontend: re-run `yarn deploy --network <chain>` and commit the updated `deployedContracts.ts`.
- Wallet/connect issues: verify WalletConnect Project ID and RPC availability.
- Lighthouse upload: ensure `NEXT_PUBLIC_LIGHTHOUSE_API_KEY` is set; accept the signature prompt.
- Etherscan verify: set `ETHERSCAN_V2_API_KEY` and confirm network support.
